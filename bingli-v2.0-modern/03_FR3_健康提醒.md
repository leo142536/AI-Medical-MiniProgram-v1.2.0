# FR3 - 健康提醒功能需求

## 1. 功能概述

健康提醒模块为用户提供全方位的健康管理提醒服务，包括用药提醒、复诊提醒、健康检查提醒等，帮助用户建立良好的健康管理习惯。

## 2. 功能需求

### 2.1 用药提醒

#### 2.1.1 创建用药提醒
- **功能描述**：为家庭成员创建个性化的用药提醒
- **输入**：
  - 药品名称
  - 用药时间
  - 用药剂量
  - 用药频次
  - 提醒方式
  - 疗程时长
- **输出**：用药提醒设置成功
- **业务规则**：
  - 支持多种提醒频次（每日、每周、每月等）
  - 支持多个时间点提醒
  - 自动计算疗程结束时间
  - 支持临时暂停提醒

#### 2.1.2 用药记录
- **功能描述**：记录实际用药情况
- **输入**：用药确认、延迟用药、跳过用药
- **输出**：用药记录更新
- **业务规则**：
  - 记录用药时间和状态
  - 统计用药依从性
  - 生成用药报告
  - 异常用药预警

### 2.2 复诊提醒

#### 2.2.1 智能复诊提醒
- **功能描述**：基于病历自动生成复诊提醒
- **输入**：病历信息、医生建议
- **输出**：复诊提醒计划
- **业务规则**：
  - 根据疾病类型推荐复诊时间
  - 支持医生建议的复诊时间
  - 自动关联相关病历
  - 提供医院科室信息

#### 2.2.2 手动复诊提醒
- **功能描述**：用户手动设置复诊提醒
- **输入**：复诊时间、医院、科室、医生
- **输出**：复诊提醒创建成功
- **业务规则**：
  - 支持提前提醒设置
  - 支持重复提醒
  - 关联历史就诊记录
  - 提供预约挂号入口

### 2.3 健康检查提醒

#### 2.3.1 定期体检提醒
- **功能描述**：根据年龄和健康状况推荐体检项目
- **输入**：成员年龄、性别、健康状况
- **输出**：个性化体检建议
- **业务规则**：
  - 不同年龄段推荐不同检查项目
  - 考虑家族病史和个人病史
  - 提供体检机构推荐
  - 记录体检完成情况

#### 2.3.2 疫苗接种提醒
- **功能描述**：儿童和成人疫苗接种提醒
- **输入**：年龄、疫苗接种史
- **输出**：疫苗接种计划
- **业务规则**：
  - 按照国家免疫计划推荐
  - 支持自费疫苗提醒
  - 记录接种历史
  - 提供接种点信息

### 2.4 自定义提醒

#### 2.4.1 健康习惯提醒
- **功能描述**：培养健康生活习惯的提醒
- **输入**：习惯类型、提醒时间、频次
- **输出**：习惯提醒设置
- **业务规则**：
  - 支持多种健康习惯（运动、喝水、睡眠等）
  - 习惯打卡记录
  - 习惯统计分析
  - 习惯养成激励

#### 2.4.2 特殊事项提醒
- **功能描述**：个性化的健康相关提醒
- **输入**：提醒内容、时间、重要程度
- **输出**：自定义提醒创建
- **业务规则**：
  - 支持一次性和重复提醒
  - 支持多种提醒方式
  - 提醒优先级设置
  - 提醒完成确认

## 3. 提醒方式

### 3.1 小程序内提醒
- 弹窗提醒
- 消息中心通知
- 首页提醒卡片
- 红点标记提示

### 3.2 微信消息提醒
- 服务通知消息
- 模板消息推送
- 订阅消息提醒
- 客服消息通知

### 3.3 系统推送提醒
- 手机系统通知
- 锁屏提醒显示
- 声音和震动提醒
- 自定义提醒铃声

## 4. 界面设计要求

### 4.1 提醒中心页面
- 今日提醒列表
- 提醒分类标签
- 快速添加按钮
- 提醒完成状态
- 历史提醒记录

### 4.2 创建提醒页面
- 提醒类型选择
- 时间日期选择器
- 重复规则设置
- 提醒方式选择
- 备注信息输入

### 4.3 用药管理页面
- 当前用药列表
- 用药时间轴
- 用药统计图表
- 药品信息管理
- 用药依从性报告

### 4.4 体检计划页面
- 推荐体检项目
- 体检时间安排
- 体检机构信息
- 体检报告管理
- 健康指标趋势

## 5. 数据模型

### 5.1 提醒设置表 (reminders)
```javascript
{
  _id: ObjectId,
  userId: ObjectId,         // 用户ID
  memberId: ObjectId,       // 家庭成员ID
  type: String,             // 提醒类型
  title: String,            // 提醒标题
  content: String,          // 提醒内容
  reminderTime: Date,       // 提醒时间
  repeatRule: Object,       // 重复规则
  notifyMethods: Array,     // 提醒方式
  priority: Number,         // 优先级
  status: Number,           // 状态
  createTime: Date,         // 创建时间
  updateTime: Date          // 更新时间
}
```

### 5.2 用药计划表 (medication_plans)
```javascript
{
  _id: ObjectId,
  userId: ObjectId,         // 用户ID
  memberId: ObjectId,       // 成员ID
  medicationName: String,   // 药品名称
  dosage: String,           // 剂量
  frequency: String,        // 频次
  startDate: Date,          // 开始日期
  endDate: Date,            // 结束日期
  reminderTimes: Array,     // 提醒时间点
  instructions: String,     // 用药说明
  sideEffects: Array,       // 副作用
  status: Number,           // 状态
  createTime: Date          // 创建时间
}
```

### 5.3 提醒记录表 (reminder_logs)
```javascript
{
  _id: ObjectId,
  reminderId: ObjectId,     // 提醒ID
  triggerTime: Date,        // 触发时间
  responseTime: Date,       // 响应时间
  action: String,           // 用户操作
  status: String,           // 完成状态
  notes: String,            // 备注
  createTime: Date          // 创建时间
}
```

## 6. API接口设计

### 6.1 提醒管理接口
- `GET /api/reminders` - 获取提醒列表
- `POST /api/reminders` - 创建提醒
- `PUT /api/reminders/:id` - 更新提醒
- `DELETE /api/reminders/:id` - 删除提醒
- `POST /api/reminders/:id/complete` - 完成提醒

### 6.2 用药管理接口
- `GET /api/medications` - 获取用药计划
- `POST /api/medications` - 创建用药计划
- `PUT /api/medications/:id` - 更新用药计划
- `POST /api/medications/:id/take` - 记录用药

### 6.3 体检管理接口
- `GET /api/checkups/recommendations` - 获取体检建议
- `POST /api/checkups/plans` - 创建体检计划
- `GET /api/checkups/history` - 获取体检历史

## 7. 智能推荐算法

### 7.1 用药提醒智能化
- 基于病历自动生成用药提醒
- 学习用户用药习惯
- 药物相互作用检查
- 用药依从性分析

### 7.2 体检项目推荐
- 年龄性别相关推荐
- 家族病史风险评估
- 个人健康状况分析
- 地区疾病流行趋势

### 7.3 提醒时间优化
- 用户活跃时间分析
- 提醒响应率统计
- 个性化提醒时间推荐
- 提醒频次自动调整

## 8. 性能要求

### 8.1 提醒准确性
- 提醒触发准确率 > 99%
- 时间误差 < 1分钟
- 消息推送成功率 > 95%
- 系统响应时间 < 2秒

### 8.2 并发处理
- 支持万级用户同时提醒
- 消息队列处理机制
- 失败重试机制
- 负载均衡策略

## 9. 安全和隐私

### 9.1 数据安全
- 提醒内容加密存储
- 敏感信息脱敏处理
- 访问权限控制
- 操作日志记录

### 9.2 隐私保护
- 用户授权机制
- 数据使用透明
- 隐私设置选项
- 数据删除权利
