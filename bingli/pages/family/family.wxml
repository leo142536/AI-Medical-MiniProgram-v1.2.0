<!-- pages/family/family.wxml -->
<view class="container">
  <!-- å®¶åº­ä¿¡æ¯å¡ç‰‡ -->
  <view class="family-card" wx:if="{{familyInfo}}">
    <view class="family-header">
      <view class="family-info">
        <text class="family-name">{{familyInfo.name}}</text>
        <text class="family-desc">{{members.length}}ä½æˆå‘˜</text>
      </view>
      <view class="family-actions">
        <button 
          class="action-btn edit" 
          wx:if="{{isAdmin}}"
          bindtap="onEditFamily"
        >
          <text class="btn-icon">âœï¸</text>
        </button>
        <button class="action-btn share" bindtap="onShareFamily">
          <text class="btn-icon">ğŸ“¤</text>
        </button>
      </view>
    </view>
    
    <view class="family-stats">
      <view class="stat-item">
        <text class="stat-number">{{members.length}}</text>
        <text class="stat-label">å®¶åº­æˆå‘˜</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">0</text>
        <text class="stat-label">æœ¬æœˆç—…å†</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">0</text>
        <text class="stat-label">å¾…åŠæé†’</text>
      </view>
    </view>
  </view>

  <!-- æˆå‘˜åˆ—è¡¨ -->
  <view class="members-section">
    <view class="section-header">
      <text class="section-title">å®¶åº­æˆå‘˜</text>
      <button 
        class="add-btn" 
        wx:if="{{isAdmin}}"
        bindtap="onAddMember"
      >
        <text class="add-icon">+</text>
        <text class="add-text">æ·»åŠ æˆå‘˜</text>
      </button>
    </view>

    <view class="members-list">
      <view 
        class="member-card" 
        wx:for="{{members}}" 
        wx:key="id"
        data-id="{{item.id}}"
        bindtap="onMemberTap"
      >
        <view class="member-avatar">
          <image 
            class="avatar-img" 
            src="{{item.avatar || '/images/default-avatar.png'}}" 
            mode="aspectFill"
          />
          <view class="role-badge" wx:if="{{item.role === 'admin'}}">
            <text class="badge-text">ç®¡ç†å‘˜</text>
          </view>
        </view>
        
        <view class="member-info">
          <text class="member-name">{{item.name}}</text>
          <text class="member-relation">{{item.relation}}</text>
          <view class="member-meta">
            <text class="meta-item">{{item.gender === 'male' ? 'ç”·' : 'å¥³'}}</text>
            <text class="meta-item" wx:if="{{item.birthday}}">{{item.birthday}}</text>
          </view>
        </view>

        <view class="member-actions">
          <view class="action-dot"></view>
          <view class="action-dot"></view>
          <view class="action-dot"></view>
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{!familyInfo}}">
    <view class="empty-icon">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</view>
    <text class="empty-title">æš‚æ— å®¶åº­ä¿¡æ¯</text>
    <text class="empty-desc">è¯·å…ˆå®Œæˆç™»å½•æ³¨å†Œ</text>
    <button class="start-btn" bindtap="goToLogin">å»ç™»å½•</button>
  </view>
</view> 