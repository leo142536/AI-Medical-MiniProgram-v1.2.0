<!--pages/profile/profile.wxml-->
<view class="profile-container">
  <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
  <view class="user-card">
    <view class="user-avatar">
      <image 
        src="{{userInfo.avatarUrl || '/images/default-avatar.png'}}" 
        class="avatar-image"
        mode="aspectFill"
      />
    </view>
    <view class="user-info">
      <text class="user-name">{{userInfo.name || 'æœªç™»å½•'}}</text>
      <text class="user-role">{{familyInfo.adminName === userInfo.name ? 'å®¶åº­ç®¡ç†å‘˜' : 'å®¶åº­æˆå‘˜'}}</text>
      <text class="family-name">{{familyInfo.name || 'æœªåŠ å…¥å®¶åº­'}}</text>
    </view>
    <view class="edit-btn" bindtap="onEditProfile">
      <text class="edit-icon">âœï¸</text>
    </view>
  </view>

  <!-- å¿«é€Ÿç»Ÿè®¡ -->
  <view class="stats-section">
    <text class="section-title">æˆ‘çš„æ•°æ®</text>
    <view class="stats-grid">
      <view class="stat-item" data-type="record" bindtap="onStatTap">
        <text class="stat-number">{{quickStats.recordCount}}</text>
        <text class="stat-label">ç—…å†è®°å½•</text>
      </view>
      <view class="stat-item" data-type="reminder" bindtap="onStatTap">
        <text class="stat-number">{{quickStats.reminderCount}}</text>
        <text class="stat-label">æ´»è·ƒæé†’</text>
      </view>
      <view class="stat-item" data-type="family" bindtap="onStatTap">
        <text class="stat-number">{{quickStats.familyMemberCount}}</text>
        <text class="stat-label">å®¶åº­æˆå‘˜</text>
      </view>
    </view>
  </view>

  <!-- åŠŸèƒ½èœå• -->
  <view class="settings-section">
    <text class="section-title">åŠŸèƒ½èœå•</text>
    <view class="settings-list">
      <view 
        wx:for="{{menuItems}}" 
        wx:key="action"
        class="setting-item"
        data-action="{{item.action}}"
        bindtap="onMenuTap"
      >
        <view class="setting-left">
          <text class="setting-icon">{{item.icon}}</text>
          <view class="setting-content">
            <text class="setting-title">{{item.title}}</text>
            <text class="setting-desc">{{item.desc}}</text>
          </view>
        </view>
        <text class="setting-arrow" wx:if="{{item.arrow}}">></text>
      </view>
    </view>
  </view>

  <!-- è®¾ç½®åˆ—è¡¨ -->
  <view class="settings-section">
    <text class="section-title">è®¾ç½®</text>
    <view class="settings-list">
      <view 
        wx:for="{{settings}}" 
        wx:key="id"
        class="setting-item"
        data-path="{{item.path}}"
        bindtap="onSettingTap"
      >
        <view class="setting-left">
          <text class="setting-icon">{{item.icon}}</text>
          <view class="setting-content">
            <text class="setting-title">{{item.title}}</text>
            <text class="setting-desc">{{item.description}}</text>
          </view>
        </view>
        <text class="setting-arrow">></text>
      </view>
    </view>
  </view>

  <!-- æ“ä½œæŒ‰é’® -->
  <view class="action-section">
    <button class="contact-btn" bindtap="onContactService">
      <text class="btn-icon">ğŸ“</text>
      <text>è”ç³»å®¢æœ</text>
    </button>
    
    <button class="logout-btn" bindtap="onLogout">
      <text class="btn-icon">ğŸšª</text>
      <text>é€€å‡ºç™»å½•</text>
    </button>
  </view>

  <!-- ç‰ˆæœ¬ä¿¡æ¯ -->
  <view class="version-info">
    <text class="version-text">å®¶åº­ç—…å†ç®¡ç† v1.2.0</text>
    <text class="copyright">Â© 2024 AIç—…ä¾‹ç®¡ç†å›¢é˜Ÿ</text>
  </view>
</view> 