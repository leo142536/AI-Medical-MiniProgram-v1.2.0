<!-- pages/home/home.wxml -->
<view class="container">
  <!-- ç”¨æˆ·ä¿¡æ¯åŒºåŸŸ -->
  <view class="user-section">
    <view class="greeting">
      <text class="time-greeting">{{timeGreeting}}</text>
      <text class="user-name">{{userInfo.nickName || 'ç”¨æˆ·'}}</text>
    </view>
    <view class="weather-info">
      <text class="weather">{{weather || 'è·å–å¤©æ°”ä¸­...'}}</text>
    </view>
  </view>

  <!-- å¿«æ·æ“ä½œåŒºåŸŸ -->
  <view class="quick-actions">
    <view 
      class="action-item" 
      wx:for="{{quickActions}}" 
      wx:key="id"
      data-path="{{item.path}}"
      bindtap="onQuickActionTap"
    >
      <view class="action-icon">{{item.icon}}</view>
      <text class="action-title">{{item.title}}</text>
    </view>
  </view>

  <!-- å®¶åº­æˆå‘˜æ¦‚è§ˆ -->
  <view class="section family-section" wx:if="{{familyMembers.length > 0}}">
    <view class="section-header">
      <text class="section-title">å®¶åº­æˆå‘˜</text>
      <text class="section-more" bindtap="onViewMoreFamily">æŸ¥çœ‹å…¨éƒ¨</text>
    </view>
    <scroll-view class="member-scroll" scroll-x="true">
      <view class="member-list">
        <view 
          class="member-item" 
          wx:for="{{familyMembers}}" 
          wx:key="id"
          data-id="{{item.id}}"
          bindtap="onFamilyMemberTap"
        >
          <view class="member-avatar">
            <image 
              class="avatar-img" 
              src="{{item.avatar || '/images/default-avatar.png'}}" 
              mode="aspectFill"
            />
          </view>
          <text class="member-name">{{item.name}}</text>
          <text class="member-relation">{{item.relation}}</text>
        </view>
      </view>
    </scroll-view>
  </view>

  <!-- æœ€è¿‘ç—…å† -->
  <view class="section records-section" wx:if="{{recentRecords.length > 0}}">
    <view class="section-header">
      <text class="section-title">æœ€è¿‘ç—…å†</text>
      <text class="section-more" bindtap="onViewMoreRecords">æŸ¥çœ‹æ›´å¤š</text>
    </view>
    <view class="record-list">
      <view 
        class="record-item" 
        wx:for="{{recentRecords}}" 
        wx:key="id"
        data-id="{{item.id}}"
        bindtap="onRecordTap"
      >
        <view class="record-info">
          <text class="record-title">{{item.title}}</text>
          <text class="record-meta">{{item.member}} Â· {{item.hospital}}</text>
        </view>
        <text class="record-date">{{item.date}}</text>
      </view>
    </view>
  </view>

  <!-- å³å°†åˆ°æ¥çš„æé†’ -->
  <view class="section reminders-section" wx:if="{{upcomingReminders.length > 0}}">
    <view class="section-header">
      <text class="section-title">å³å°†åˆ°æ¥çš„æé†’</text>
      <text class="section-more" bindtap="onViewMoreReminders">æŸ¥çœ‹æ›´å¤š</text>
    </view>
    <view class="reminder-list">
      <view 
        class="reminder-item" 
        wx:for="{{upcomingReminders}}" 
        wx:key="id"
        data-id="{{item.id}}"
        bindtap="onReminderTap"
      >
        <view class="reminder-icon {{item.type}}">
          <text>{{item.type === 'medical' ? 'ğŸ¥' : 'ğŸ’Š'}}</text>
        </view>
        <view class="reminder-info">
          <text class="reminder-title">{{item.title}}</text>
          <text class="reminder-meta">{{item.member}} Â· {{item.time}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{!hasUserInfo}}">
    <view class="empty-icon">ğŸ‘‹</view>
    <text class="empty-title">æ¬¢è¿ä½¿ç”¨AIç—…ä¾‹ç®¡ç†</text>
    <text class="empty-desc">å¼€å§‹ç®¡ç†æ‚¨çš„å®¶åº­å¥åº·ä¿¡æ¯</text>
    <button class="start-btn" bindtap="onStartUse">å¼€å§‹ä½¿ç”¨</button>
  </view>
</view> 